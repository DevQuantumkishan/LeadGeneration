LeadListScreen As screen:
    OnVisible: |-
        =Refresh(LeadInformations);
        Set(VarPopUpInprogress,false);

    ctnmainLS As groupContainer.verticalAutoLayoutContainer:
        Height: =Parent.Height
        LayoutDirection: =LayoutDirection.Vertical
        LayoutGap: =10
        LayoutMode: =LayoutMode.Auto
        Width: =Parent.Width
        ZIndex: =1

        ctnHeaderLeadListScreen As groupContainer.manualLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            Fill: =RGBA(227, 43, 43, 1)
            FillPortions: =0
            Height: =80
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            Width: =Parent.Width
            ZIndex: =7

            imguserLS As image:
                Fill: =RGBA(253, 222, 207, 1)
                Height: =50
                Image: |-
                    =//'man-avatar'
                    User().Image
                RadiusBottomLeft: =91
                RadiusBottomRight: =91
                RadiusTopLeft: =91
                RadiusTopRight: =91
                Width: =50
                X: =lblheaderLS.X+lblheaderLS.Width
                Y: =16
                ZIndex: =1

            lblusernameLS As label:
                Align: =Align.Center
                Color: =Header.White
                FontWeight: =FontWeight.Semibold
                Height: =Parent.Height
                Text: |-
                    =//"Hi Sam Martin"
                    User().FullName
                Width: =ctnHeaderLeadListScreen.Width/8
                X: =imguserLS.X+ imguserLS.Height
                ZIndex: =2

            lblheaderLS As label:
                Align: =Align.Center
                Color: =Header.White
                Fill: =RGBA(227, 43, 43, 1)
                FontWeight: =FontWeight.Bold
                Height: =Parent.Height
                Size: =26
                Text: =If(VarMyLeads=true,"My Leads",VarOpenLeads=true,"Open Leads",VarQuotedLeads=true,"Quoted Leads",VarSoldLeads=true,"Sold Leads")
                Width: =ctnHeaderLeadListScreen.Width/1.5
                X: =imgSchindlerlogoLS.Width+imgSchindlerlogoLS.X
                ZIndex: =3

            imgSchindlerlogoLS As image:
                Fill: =RGBA(255, 255, 255, 1)
                Height: =Parent.Height
                Image: =SchindlerImage
                PaddingBottom: =5
                PaddingLeft: =2
                PaddingRight: =1
                PaddingTop: =5
                Width: =ctnHeaderLeadListScreen.Width/10
                ZIndex: =4

        ctnlistLS As groupContainer.verticalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            LayoutDirection: =LayoutDirection.Vertical
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            Width: =Parent.Width
            ZIndex: =8

            ctnfilterLS As groupContainer.manualLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =100
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                Width: =Parent.Width
                ZIndex: =1

                ctnfiltersearchLS As groupContainer.horizontalAutoLayoutContainer:
                    Height: =100
                    LayoutAlignItems: =LayoutAlignItems.Center
                    LayoutGap: =5
                    LayoutJustifyContent: =LayoutJustifyContent.End
                    LayoutMode: =LayoutMode.Auto
                    PaddingRight: =10
                    Width: =Parent.Width
                    ZIndex: =1

                    cmbxregionfilterLS As combobox:
                        BorderColor: =RGBA(255, 0, 0, 1)
                        ChevronBackground: =RGBA(255, 0, 0, 1)
                        ChevronHoverBackground: =//ColorFade(RGBA(56, 96, 178, 1), -20%)
                        DisplayFields: =["cr02d_territory"]
                        HoverFill: =RGBA(0, 0, 0, 0)
                        InputTextPlaceholder: ="Select Region"
                        Items: =SHTechnicians
                        PressedColor: =RGBA(0, 0, 0, 1)
                        PressedFill: =RGBA(0, 0, 0, 0)
                        Reset: =true
                        SearchFields: =["cr02d_territory"]
                        SearchItems: =Search(SHTechnicians,cmbxregionfilterLS.SearchText,"cr02d_territory")
                        SelectionFill: =RGBA(0, 0, 0, 0)
                        SelectMultiple: =false
                        Width: =200
                        ZIndex: =2

                    cmbxdistrictfilterLS As combobox:
                        BorderColor: =RGBA(255, 0, 0, 1)
                        ChevronBackground: =RGBA(255, 0, 0, 1)
                        ChevronHoverBackground: =//ColorFade(RGBA(56, 96, 178, 1), -20%)
                        DisplayFields: =["cr02d_district"]
                        InputTextPlaceholder: ="Select District"
                        Items: =Filter(SHTechnicians, Territory = cmbxregionfilterLS.Selected.Territory)
                        PressedColor: =RGBA(0, 0, 0, 1)
                        PressedFill: =RGBA(0, 0, 0, 0)
                        Reset: =true
                        SearchFields: =["cr02d_district"]
                        SearchItems: =Search(Filter(SHTechnicians, Territory = cmbxregionfilterLS.Selected.Territory),cmbxdistrictfilterLS.SearchText,"cr02d_district")
                        Width: =200
                        ZIndex: =3

                    cmbxareafilterLS As combobox:
                        BorderColor: =RGBA(255, 0, 0, 1)
                        ChevronBackground: =RGBA(255, 0, 0, 1)
                        ChevronHoverBackground: =//ColorFade(RGBA(56, 96, 178, 1), -20%)
                        DisplayFields: =["cr02d_area"]
                        InputTextPlaceholder: ="Select Area"
                        Items: =Filter(SHTechnicians, District = cmbxdistrictfilterLS.Selected.District)
                        PressedColor: =RGBA(0, 0, 0, 1)
                        PressedFill: =RGBA(0, 0, 0, 0)
                        Reset: =true
                        SearchFields: =["cr02d_area"]
                        SearchItems: =Search(Filter(SHTechnicians, District = cmbxdistrictfilterLS.Selected.District),cmbxareafilterLS.SearchText,"cr02d_area")
                        Width: =200
                        ZIndex: =4

                    txtinptsearchLS As text:
                        BorderColor: =RGBA(255, 0, 0, 1)
                        Default: =""
                        HintText: ="Search on Contract No./Mechanic Name"
                        HoverBorderColor: =RGBA(255, 0, 0, 1)
                        HoverFill: =RGBA(0, 0, 0, 0)
                        Width: =340
                        ZIndex: =5

                btnbackLS As button:
                    BorderColor: =//ColorFade(Self.Fill, -15%)
                    BorderThickness: =0
                    Fill: =Header.Red
                    FocusedBorderThickness: =0
                    HoverFill: =//ColorFade(RGBA(56, 96, 178, 1), -20%)
                    OnSelect: |-
                        =Reset(cmbxregionfilterLS);
                        Reset(cmbxdistrictfilterLS);
                        Reset(cmbxareafilterLS);
                        Navigate(DashboardScreen)
                    PressedFill: =//Self.Color
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Text: =" Back"
                    X: =20
                    Y: =25
                    ZIndex: =2

            ctnleadlistLS As groupContainer.manualLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =Parent.Height
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                Visible: =true // VarAllLeads
                Width: =Parent.Width
                ZIndex: =2

                ctnleadlistglryLS As groupContainer.verticalAutoLayoutContainer:
                    Height: =Parent.Height//+5000
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutMode: =LayoutMode.Auto
                    LayoutOverflowY: =LayoutOverflow.Scroll
                    Width: =Parent.Width-20
                    X: =10//Parent.X+10
                    Y: =ctnlistheadingLS.X+ctnlistheadingLS.Height
                    ZIndex: =1

                    "glryleadlistLS As gallery.'BrowseLayout_Vertical_OneTextVariant_ver4.0'":
                        AlignInContainer: =AlignInContainer.SetByContainer
                        BorderColor: =RGBA(204, 204, 204, 1)
                        BorderThickness: =3
                        FillPortions: =0
                        Height: =Parent.Height
                        Items: |-
                            =Sort(
                                If(
                                    VarMyLeads = true,
                                    Filter(
                                        LeadInformations,
                                        QQTeamName = User().FullName , Territory=cmbxregionfilterLS.Selected.Territory ,District=cmbxdistrictfilterLS.Selected.District ,Area=cmbxareafilterLS.Selected.Area
                                    ),
                                    If(
                                        VarOpenLeads = true,
                                        Filter(
                                            LeadInformations,
                                            //LeadStatus <>"Quoted"
                                            (LeadStatus = "Submitted"|| LeadStatus = "Rejected" ||LeadStatus = "InProgress")
                                            , Territory=cmbxregionfilterLS.Selected.Territory ||IsBlank(cmbxregionfilterLS.Selected.Territory) ,District=cmbxdistrictfilterLS.Selected.District ||IsBlank(cmbxdistrictfilterLS.Selected.District) ,Area=cmbxareafilterLS.Selected.Area ||IsBlank(cmbxareafilterLS.Selected.Area)
                                        ),
                                        If(
                                            VarQuotedLeads = true,
                                            Filter(
                                                LeadInformations,
                                                LeadStatus = "Quoted"
                                            ),
                                            If(
                                                VarSoldLeads = true,
                                                Filter(
                                                    LeadInformations,
                                                    LeadStatus = "Sold"
                                                )
                                            )
                                        )
                                    )
                                ),
                                'Created On',
                                SortOrder.Descending
                            )
                        Layout: =Layout.Vertical
                        LayoutMinHeight: =287
                        LayoutMinWidth: =320
                        OnSelect: =//Navigate(CommingSoonUnused)
                        TemplatePadding: =0
                        TemplateSize: =ctnlistheadingvalueLS.Height+10
                        Width: =Parent.Width
                        ZIndex: =1

                        rectglrylistLS As rectangle:
                            Fill: |-
                                =//If(ThisItem.LeadStatus="Submitted",RGBA(39,113,194,1),ThisItem.LeadStatus="Inprogess",RGBA(54,176,75,1),ThisItem.LeadStatus="Reject",RGBA(255,0,0,1)) 
                                RGBA(204, 204, 204, 1)
                            Height: =2
                            OnSelect: =Select(Parent)
                            Width: =Parent.TemplateWidth -30
                            X: =1
                            Y: |-
                                =//Parent.TemplateHeight - 1
                                //If(Label8_3.Height>60 ,Label8_3.Height+Label8_3.Y, Label9_3.Height>60,Label9_3.Height+Label9_3.Y,50)
                                //If(Label8_3.Height>Label9_3.Height ,Label8_3.LayoutMinHeight+Label8_3.Y,Label9_3.LayoutMinHeight+Label9_3.Y)
                                ctnlistheadingvalueLS.Y+ctnlistheadingvalueLS.Height-10
                            ZIndex: =3

                        ctnlistheadingvalueLS As groupContainer.horizontalAutoLayoutContainer:
                            Height: =60//If(lbldistrictvalueLS.Height>60 ,lbldistrictvalueLS.Height+lbldistrictvalueLS.Y, lblareavalueLS.Height>60,lblareavalueLS.Height+lblareavalueLS.Y,60)
                            LayoutAlignItems: =LayoutAlignItems.Center
                            LayoutGap: =10
                            LayoutMode: =LayoutMode.Auto
                            LayoutWrap: =true
                            Width: =Parent.Width
                            ZIndex: =4

                            lblcreatedatevalueLS As label:
                                Align: =Align.Center
                                Text: =Text(ThisItem.'Created On',"yyyy mmm dd")
                                ZIndex: =1

                            lblqqteamnamvalueLS As label:
                                Align: =Align.Center
                                Text: |-
                                    =If(!IsBlank(LookUp(LeadInformations,LeadStatus="Submitted" && ID=ThisItem.ID)),"Not Assigned",LookUp(LeadInformations,ID=ThisItem.ID,QQTeamName))
                                    //"QQ name"
                                ZIndex: =2

                            lblmechanicnamevalueLS As label:
                                Align: =Align.Center
                                Text: |-
                                    =ThisItem.MechanicName
                                    //"Mechanic Name"
                                ZIndex: =3

                            lblcontractnovalueLS As label:
                                Align: =Align.Center
                                Text: =ThisItem.'ContractNumber '
                                Width: =120
                                ZIndex: =4

                            lblregionvalueLS As label:
                                Align: =Align.Center
                                Text: =ThisItem.Territory
                                ZIndex: =5

                            lbldistrictvalueLS As label:
                                Align: =Align.Center
                                AutoHeight: =true
                                Height: =60
                                Text: =ThisItem.District
                                ZIndex: =6

                            lblareavalueLS As label:
                                Align: =Align.Center
                                AutoHeight: =true
                                Height: =60
                                Text: =ThisItem.Area
                                ZIndex: =7

                            lblleadstatusvalueLS As label:
                                Align: =Align.Center
                                Color: =If(ThisItem.LeadStatus="Submitted",RGBA(39,113,194,1),ThisItem.LeadStatus="InProgress",RGBA(54,176,75,1),ThisItem.LeadStatus="Rejected",RGBA(255,0,0,1))
                                FontWeight: =FontWeight.Semibold
                                Text: |-
                                    =//"Active"
                                    ThisItem.LeadStatus
                                ZIndex: =8

                            icnviewLS As icon.Add:
                                Height: =40
                                Icon: =Icon.View
                                Visible: =false
                                Width: =40
                                ZIndex: =9

                            icneditLS As icon.Add:
                                Height: =40
                                Icon: =Icon.Edit
                                OnSelect: =//Navigate(LeadScreen)
                                PaddingLeft: =10
                                Visible: =false
                                Width: =40
                                ZIndex: =10

                            icnrightLS As icon.ChevronRight:
                                Color: =RGBA(255, 0, 0, 1)
                                Height: =60
                                Icon: =Icon.ChevronRight
                                OnSelect: =//Navigate(LeadScreen)
                                PaddingLeft: =40
                                Width: =60
                                X: =lblleadstatusvalueLS.Width+lblleadstatusvalueLS.X
                                ZIndex: =11

                        btnglryleadlistLS As button:
                            Fill: =RGBA(0, 0, 0, 0)
                            Height: =ctnlistheadingvalueLS.Height
                            HoverFill: =//ColorFade(RGBA(56, 96, 178, 1), -20%)
                            OnSelect: |
                                =If(ThisItem.LeadStatus="Submitted",Set(VarPopUpInprogress,true),Navigate(LeadScreen));
                                Set(VarSelectedLeadId,ThisItem.ID);
                                Refresh(LeadImages);
                            PressedColor: =//Self.Fill
                            PressedFill: =//Self.Color
                            Text: =""
                            Width: =ctnlistheadingvalueLS.Width
                            X: =ctnlistheadingvalueLS.X
                            Y: =ctnlistheadingvalueLS.Y
                            ZIndex: =5

                        rectvertLS As rectangle:
                            Fill: =If(ThisItem.LeadStatus="Submitted",RGBA(39,113,194,1),ThisItem.LeadStatus="Inprogess",RGBA(54,176,75,1),ThisItem.LeadStatus="Reject",RGBA(255,0,0,1))
                            Height: =ctnlistheadingvalueLS.Height-10
                            Visible: =false
                            Width: =10
                            X: =10
                            ZIndex: =6

                    Container5 As groupContainer.verticalAutoLayoutContainer:
                        FillPortions: =0
                        Height: =250
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMinHeight: =100
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        ZIndex: =2

                ctnlistheadingLS As groupContainer.horizontalAutoLayoutContainer:
                    Fill: =RGBA(230, 230, 230, 1)
                    Height: =60
                    LayoutAlignItems: =LayoutAlignItems.Center
                    LayoutGap: =10
                    LayoutMode: =LayoutMode.Auto
                    Width: =Parent.Width-20
                    X: =10
                    ZIndex: =2

                    lblcreatedateLS As label:
                        Align: =Align.Center
                        Text: ="Created Date"
                        ZIndex: =1

                    lblqqteamnameLS As label:
                        Align: =Align.Center
                        Text: ="QQ Team name"
                        ZIndex: =2

                    lblmechanicnameLS As label:
                        Align: =Align.Center
                        Text: ="Mechanic Name"
                        ZIndex: =3

                    lblcontractnoLS As label:
                        Align: =Align.Center
                        Text: ="Contract No. "
                        Width: =120
                        ZIndex: =4

                    lblregionLS As label:
                        Align: =Align.Center
                        Text: ="Territory"
                        ZIndex: =5

                    lbldistrictLS As label:
                        Align: =Align.Center
                        Text: ="District"
                        ZIndex: =6

                    lblareaLS As label:
                        Align: =Align.Center
                        Text: ="Area"
                        ZIndex: =7

                    lblleadstatusLS As label:
                        Align: =Align.Center
                        Text: ="Lead Status"
                        Width: =120
                        ZIndex: =8

                    lblactionLS As label:
                        Align: =Align.Center
                        Text: ="Action"
                        Visible: =false
                        ZIndex: =9

    grpinprogressconfirmationLS As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =8

        rectfullinprogressconfirmtionLS As rectangle:
            Fill: =RGBA(0, 0, 0, 0.29)
            Height: =Parent.Height
            Visible: =VarPopUpInprogress
            Width: =Parent.Width
            ZIndex: =2

        rectinprogressconfirmationLS As rectangle:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =280
            Visible: =VarPopUpInprogress
            Width: =400
            X: =(Parent.Width-Self.Width)/2
            Y: =Parent.Height/3
            ZIndex: =3

        imginfoLS As image:
            Height: =52
            Image: =images
            Visible: =VarPopUpInprogress
            Width: =52
            X: =(Parent.Width-Self.Width)/2
            Y: =rectinprogressconfirmationLS.Y+20
            ZIndex: =4

        lblmsgLS As label:
            Align: =Align.Center
            Font: =Font.Arial
            FontWeight: =FontWeight.Bold
            Height: =100
            Size: =15
            Text: ="Do you want to work on this lead ?"
            Visible: =VarPopUpInprogress
            Width: =350
            X: =(Parent.Width-Self.Width)/2
            Y: =imginfoLS.Y+ imginfoLS.Height+2
            ZIndex: =5

        btnyesLS As button:
            Fill: =RGBA(54, 176, 75, 1)
            Font: =Font.Arial
            HoverFill: =RGBA(75, 125, 6, 1)
            OnSelect: |-
                =Set(QQname,true);
                UpdateIf(LeadInformations,ID=glryleadlistLS.Selected.ID,{LeadStatus:"InProgress",QQTeamName:User().FullName});
                Navigate(LeadScreen)
            PressedBorderColor: =RGBA(1, 43, 1, 0)
            PressedFill: =Self.Fill
            Text: ="Yes"
            Visible: =VarPopUpInprogress
            Width: =120
            X: =(Parent.Width-Self.Width)/2.3
            Y: =lblmsgLS.Y+ lblmsgLS.Height+10
            ZIndex: =6

        btnnoLS As button:
            BorderColor: =RGBA(75, 125, 6, 1)
            Fill: =RGBA(54, 176, 75, 1)
            Font: =Font.Arial
            HoverBorderColor: =RGBA(75, 125, 6, 1)
            HoverFill: =RGBA(75, 125, 6, 1)
            OnSelect: |-
                =Set(QQname,false);
                Navigate(LeadScreen);
                //Set(VarPopUpInprogress,false);
            PressedBorderColor: =RGBA(1, 43, 1, 0)
            PressedFill: =Self.Fill
            Text: ="No"
            Visible: =VarPopUpInprogress
            Width: =120
            X: =btnyesLS.X+btnyesLS.Width+20
            Y: =lblmsgLS.Y+ lblmsgLS.Height+10
            ZIndex: =7

