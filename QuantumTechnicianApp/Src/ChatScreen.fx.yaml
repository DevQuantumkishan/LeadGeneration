ChatScreen As screen:

    Container7 As groupContainer.verticalAutoLayoutContainer:
        Fill: =RGBA(237, 237, 237, 1)
        Height: =Parent.Height
        LayoutAlignItems: =LayoutAlignItems.Stretch
        LayoutDirection: =LayoutDirection.Vertical
        LayoutGap: =10
        LayoutMode: =LayoutMode.Auto
        LayoutOverflowY: =LayoutOverflow.Scroll
        PaddingLeft: =10
        Width: =Parent.Width
        ZIndex: =1

        ctnHeaderDS_9 As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            Fill: =RGBA(255, 255, 255, 1)
            FillPortions: =0
            Height: =If(Parent.Height<Parent.Width,60,80)
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            Width: =Parent.Width
            ZIndex: =1

            IconMenuDS_3 As icon.Hamburger:
                Color: =RGBA(0, 0, 0, 1)
                Height: =Parent.Height
                Icon: =Icon.Hamburger
                OnSelect: =//Set(varshowMenu,!varshowMenu)
                PaddingBottom: =Parent.Height/3
                PaddingTop: =Parent.Height/3
                Width: =Parent.Height/2
                X: =18
                Y: =11
                ZIndex: =5

            imgSchindlerLogoDS_3 As image:
                AlignInContainer: =AlignInContainer.Center
                DisplayMode: =DisplayMode.View
                Fill: =RGBA(255, 255, 255, 1)
                Height: =Parent.Height
                Image: ='1x'
                LayoutMinHeight: =320
                LayoutMinWidth: =320
                PaddingBottom: =5
                PaddingTop: =0.00
                Width: =If(Parent.Width>Parent.Height,Parent.Width/10,Parent.Width/12)
                X: =0.00
                ZIndex: =6

            iconBackCL_2 As icon.BackArrow:
                AlignInContainer: =AlignInContainer.Center
                Color: =RGBA(0, 0, 0, 1)
                Height: =Parent.Height/2
                Icon: =Icon.ChevronLeft
                OnSelect: |-
                    =Navigate(SubmittedLeadScreen);
                    UpdateContext({locInfoExpanded:false})
                PaddingBottom: =5
                PaddingTop: =5
                Width: =Parent.Width/20
                X: =18
                Y: =11
                ZIndex: =7

            lblHeaderDS_4 As label:
                AlignInContainer: =AlignInContainer.Center
                DisplayMode: =DisplayMode.View
                Font: =Font.Arial
                FontWeight: =FontWeight.Bold
                Height: =Parent.Height
                LayoutMinHeight: =70
                PaddingLeft: =20
                PaddingRight: =5.34
                PaddingTop: =5.34
                Size: |
                    =//21.36
                    If(Parent.Width<500,14,Parent.Width>500,20)
                Text: ="Technician Lead Generation"
                Width: =Parent.Width-imgSchindlerLogoDS_3.Width-IconMenuDS_3.Width-Button2_4.Width-60
                X: =96.12
                ZIndex: =8

            Button2_4 As button:
                AlignInContainer: =AlignInContainer.Center
                BorderColor: =Color.Red
                Color: =RGBA(0, 0, 0, 1)
                DisabledBorderColor: =RGBA(255, 0, 0, 1)
                DisabledColor: =RGBA(0, 0, 0, 1)
                DisabledFill: =RGBA(0, 0, 0, 0)
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(0, 0, 0, 0)
                Font: =Font.Arial
                Height: =Parent.Height/1.5
                RadiusBottomLeft: =50
                RadiusBottomRight: =50
                RadiusTopLeft: =50
                RadiusTopRight: =50
                Size: =If(Parent.Width<500,11,Parent.Width>500,12,12)
                Text: |-
                    =Left(User().FullName, 1) &
                    Mid(
                        User().FullName,
                        Find(" ", User().FullName) + 1,
                        1)
                Width: =Parent.Height/1.5
                ZIndex: =9

        Container1_9 As groupContainer.manualLayoutContainer:
            AlignInContainer: =AlignInContainer.Center
            BorderColor: =RGBA(219, 219, 219, 1)
            BorderThickness: =2
            Fill: =RGBA(255, 255, 255, 1)
            FillPortions: =0
            Height: =If(Parent.Height<Parent.Width,Parent.Height/10,Parent.Height/16)
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            PaddingLeft: =10
            PaddingRight: =10
            RadiusBottomLeft: =10
            RadiusBottomRight: =10
            RadiusTopLeft: =10
            RadiusTopRight: =10
            Width: =Parent.Width-20
            X: =10
            Y: =85
            ZIndex: =2

            Button3_9 As button:
                Align: =Align.Right
                BorderColor: =RGBA(219, 219, 219, 1)
                Color: =RGBA(0, 0, 0, 1)
                DisplayMode: =DisplayMode.View
                Fill: =RGBA(255, 255, 255, 1)
                Font: =Font.Arial
                Height: =Parent.Height
                PaddingLeft: =20
                PaddingRight: =20
                Size: =If(Parent.Width<500,14,Parent.Width>500,20)
                Text: =VarLtdName
                Width: =Parent.Width
                ZIndex: =1

            lblHeaderDS_5 As label:
                DisplayMode: =DisplayMode.View
                Font: =Font.Arial
                FontWeight: =FontWeight.Bold
                Height: =Parent.Height
                PaddingLeft: =20
                PaddingRight: =5.34
                Size: |
                    =//21.36
                    If(Parent.Width<500,14,Parent.Width>500,20)
                Text: =VarLtdCntNumber
                Width: =Parent.Width-imgSchindlerLogoDS_3.Width-IconMenuDS_3.Width-Button2_4.Width-60
                ZIndex: =2

        Container8 As groupContainer.manualLayoutContainer:
            AlignInContainer: =AlignInContainer.Center
            Fill: =RGBA(255, 255, 255, 1)
            FillPortions: =0
            Height: =Parent.Height-ctnHeaderDS_9.Height-Container1_9.Height-40
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            PaddingLeft: =5
            PaddingRight: =5
            Width: =Parent.Width-20
            Y: =180
            ZIndex: =3

            TextInput1_2 As text:
                BorderColor: =Self.Color
                Color: =RGBA(255, 0, 0, 1)
                Default: =""
                DisabledBorderColor: =RGBA(255, 0, 0, 1)
                DisabledColor: =RGBA(255, 0, 0, 1)
                Fill: =RGBA(0, 0, 0, 0)
                Font: =Font.Arial
                Height: =80
                HintText: ="Enter message"
                HoverFill: =RGBA(0, 0, 0, 0)
                Mode: =TextMode.MultiLine
                PaddingLeft: =10
                Size: =16
                Width: =Parent.Width
                Y: =Gallery4_2.Height
                ZIndex: =1

            Icon6_2 As icon.Send:
                BorderColor: =Self.Color
                BorderThickness: =2
                Color: =RGBA(255, 0, 0, 1)
                DisabledBorderColor: =RGBA(255, 0, 0, 1)
                DisabledColor: =RGBA(255, 0, 0, 1)
                Height: =80
                Icon: =Icon.Send
                OnSelect: |-
                    =Patch(LeadChats,Defaults(LeadChats),
                                {
                                    ID:GUID(),
                                    FromEmail:myMail,
                                 // To:personEmail,
                                    Message:TextInput1_2.Text,
                                    FromName:User().FullName,
                                    LeadInformationLID:LookUp(LeadInformations,ID=VarLtdID)
                                    
                                }
                            );
                    Refresh(LeadChats);
                    Reset(TextInput1_2);
                PaddingLeft: =5
                PaddingRight: =5
                Width: =100
                X: =TextInput1_2.Width-(Self.Width)/1.2
                Y: =Gallery4_2.Height
                ZIndex: =2

            Gallery4_2 As gallery.variableTemplateHeightGallery:
                DelayItemLoading: =true
                Fill: |-
                    =//RGBA(237,237,237,1) 
                    RGBA(0, 0, 0, 0)
                Height: =Parent.Height-TextInput1_2.Height
                Items: |-
                    =Sort(Filter(LeadChats,LeadInformationLID.ID=VarLtdID),'Created On',SortOrder.Ascending)
                    /*[{
                        message:"Check doors again",
                        time:"12.59 AM",
                        name:"QQ Team",
                        from:"you"
                    },
                    {
                        message:"Gap problem",
                        time:"1.15 AM",
                        name:"Schindler guest",
                        from:"me"
                    },
                    {
                        message:"Okay",
                        time:"2.05 AM",
                        name:"QQ Team",
                        from:"you"
                    }
                    ]*/
                Layout: =Layout.Vertical
                LoadingSpinner: =LoadingSpinner.Data
                OnSelect: |-
                    =/*Patch(Chats,
                            ThisItem,
                            {
                               Read:true
                            }
                        );
                    
                    Set(MessageRead,true);
                    Refresh(Chats);*/
                TemplateSize: =Label6_2.Height+Label8_2.Height
                Width: =Parent.Width
                ZIndex: =3

                Rectangle6 As rectangle:
                    Fill: =If(ThisItem.FromEmail=User().Email, RGBA(237, 237, 237, 1),RGBA(255,255,255,1))
                    Height: =Label6_2.Height+Label8_2.Height
                    OnSelect: =Select(Parent)
                    Width: =Parent.Width-30
                    X: =10
                    ZIndex: =1

                Label6_2 As label:
                    Align: =If(ThisItem.FromEmail=User().Email,Align.Right,Align.Left)
                    AutoHeight: =true
                    Font: =Font.Arial
                    Height: =25
                    OnSelect: =Select(Parent)
                    PaddingLeft: =20
                    PaddingRight: =50
                    Size: =18
                    Text: =ThisItem.Message
                    Width: =Parent.Width
                    ZIndex: =2

                Label8_2 As label:
                    Align: =If(ThisItem.FromEmail=User().Email,Align.Right,Align.Left)
                    Font: =Font.Arial
                    Height: =30
                    OnSelect: =Select(Parent)
                    PaddingLeft: =20
                    PaddingRight: =50
                    Size: =14
                    Text: |-
                        =//ThisItem.From & "  "& ThisItem.Datetime
                        ThisItem.FromName & "  " &ThisItem.'Created On'
                    Width: =Parent.Width
                    Y: =Label6_2.Y+Label6_2.Height
                    ZIndex: =3

                Rectangle5 As rectangle:
                    Fill: =RGBA(102, 102, 102, 1)
                    Height: =3
                    Width: =Parent.Width-30
                    X: =10
                    Y: =Label8_2.Height+Label8_2.Y+5
                    ZIndex: =4

